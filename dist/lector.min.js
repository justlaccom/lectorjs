!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("Lector",[],t):"object"==typeof exports?exports.Lector=t():e.Lector=t()}(this,()=>{return e={679(e){class t{constructor(e,t={}){this.defaults={width:"100%",height:"auto",theme:"default",hideControlsTimeout:3e3,seekStep:10,colors:{primary:"#2196F3",secondary:"#FF4081",text:"#ffffff",background:"#1a1a1a"},controls:{playPause:!0,progress:!0,volume:!0,fullscreen:!0,time:!0,speed:!0},autoplay:!1,loop:!1,muted:!1,preload:"metadata",poster:""},this.isControlsVisible=!0,this.controlsTimeout=null,this.options={...this.defaults,...t},this.togglePlay=this.togglePlay.bind(this),this.toggleMute=this.toggleMute.bind(this),this.toggleFullscreen=this.toggleFullscreen.bind(this),this.setVolume=this.setVolume.bind(this),this.seek=this.seek.bind(this),this.onPlay=this.onPlay.bind(this),this.onPause=this.onPause.bind(this),this.onVolumeChange=this.onVolumeChange.bind(this),this.updateProgress=this.updateProgress.bind(this),this.handleKeyDown=this.handleKeyDown.bind(this),this.showControls=this.showControls.bind(this),this.hideControls=this.hideControls.bind(this),this.startHideControlsTimer=this.startHideControlsTimer.bind(this),this.resetHideControlsTimer=this.resetHideControlsTimer.bind(this),this.showSeekFeedback=this.showSeekFeedback.bind(this),this.seekRelative=this.seekRelative.bind(this),this.container=document.querySelector(e),this.container?this.init():console.error(`LectorJS: Aucun élément trouvé avec le sélecteur "${e}"`)}init(){this.createPlayer(),this.setupEventListeners(),this.applyTheme(),this.startHideControlsTimer()}createPlayer(){if(this.player=document.createElement("div"),this.player.className="lector-player",this.player.style.width=this.options.width,this.player.style.height=this.options.height,this.player.style.backgroundColor=this.options.colors.background,this.player.style.position="relative",this.player.style.overflow="hidden",this.player.style.borderRadius="8px",this.player.style.userSelect="none",this.player.style.touchAction="manipulation",this.video=document.createElement("video"),this.video.className="lector-video",this.video.style.width="100%",this.video.style.display="block",this.video.preload=this.options.preload,this.video.loop=this.options.loop,this.video.muted=this.options.muted,this.options.poster&&(this.video.poster=this.options.poster),this.controls=document.createElement("div"),this.controls.className="lector-controls",this.controls.style.position="absolute",this.controls.style.bottom="0",this.controls.style.left="0",this.controls.style.right="0",this.controls.style.padding="10px",this.controls.style.background="linear-gradient(transparent, rgba(0,0,0,0.7))",this.controls.style.transition="opacity 0.3s",this.controls.style.zIndex="10",this.options.controls.progress){const e=document.createElement("div");e.className="lector-progress-container",e.style.height="4px",e.style.backgroundColor="rgba(255,255,255,0.2)",e.style.borderRadius="2px",e.style.marginBottom="10px",e.style.cursor="pointer",e.style.position="relative",e.style.overflow="hidden",this.progress=document.createElement("div"),this.progress.className="lector-progress",this.progress.style.height="100%",this.progress.style.width="0%",this.progress.style.backgroundColor=this.options.colors.primary,this.progress.style.transition="width 0.1s",e.appendChild(this.progress),this.controls.appendChild(e)}const e=document.createElement("div");e.className="lector-main-controls",e.style.display="flex",e.style.alignItems="center",e.style.justifyContent="space-between";const t=document.createElement("div");t.className="lector-left-controls",t.style.display="flex",t.style.alignItems="center",t.style.gap="10px";const s='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>',i='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon></svg>',o='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"></path></svg>';this.options.controls.playPause&&(this.playPauseBtn=document.createElement("button"),this.playPauseBtn.className="lector-play-pause",this.playPauseBtn.innerHTML=s,this.playPauseBtn.style.background="none",this.playPauseBtn.style.border="none",this.playPauseBtn.style.color=this.options.colors.text,this.playPauseBtn.style.width="32px",this.playPauseBtn.style.height="32px",this.playPauseBtn.style.display="flex",this.playPauseBtn.style.alignItems="center",this.playPauseBtn.style.justifyContent="center",this.playPauseBtn.style.borderRadius="4px",this.playPauseBtn.style.transition="background-color 0.2s",this.playPauseBtn.style.cursor="pointer",this.playPauseBtn.addEventListener("mouseenter",()=>{this.playPauseBtn.style.backgroundColor="rgba(255,255,255,0.1)"}),t.appendChild(this.playPauseBtn)),this.options.controls.time&&(this.timeDisplay=document.createElement("div"),this.timeDisplay.className="lector-time",this.timeDisplay.style.color=this.options.colors.text,this.timeDisplay.style.fontSize="14px",this.timeDisplay.style.fontFamily="Arial, sans-serif",this.timeDisplay.textContent="0:00 / 0:00",t.appendChild(this.timeDisplay));const n=document.createElement("div");if(n.className="lector-right-controls",n.style.display="flex",n.style.alignItems="center",n.style.gap="10px",this.options.controls.volume){const e=document.createElement("div");e.className="lector-volume-container",e.style.display="flex",e.style.alignItems="center",e.style.gap="5px",this.volumeBtn=document.createElement("button"),this.volumeBtn.className="lector-volume-btn",this.volumeBtn.innerHTML=i,this.volumeBtn.style.background="none",this.volumeBtn.style.border="none",this.volumeBtn.style.color=this.options.colors.text,this.volumeBtn.style.fontSize="16px",this.volumeBtn.style.cursor="pointer",this.volumeBtn.style.padding="5px",this.volumeBtn.style.borderRadius="4px",this.volumeBtn.style.display="flex",this.volumeBtn.style.alignItems="center",this.volumeBtn.style.justifyContent="center",this.volumeBtn.style.transition="background-color 0.2s",this.volumeSlider=document.createElement("input"),this.volumeSlider.type="range",this.volumeSlider.className="lector-volume-slider",this.volumeSlider.min="0",this.volumeSlider.max="1",this.volumeSlider.step="0.01",this.volumeSlider.value=this.video.volume,this.volumeSlider.style.width="60px",this.volumeSlider.style.height="4px",this.volumeSlider.style.webkitAppearance="none",this.volumeSlider.style.background=this.options.colors.primary,this.volumeSlider.style.borderRadius="2px",this.volumeSlider.style.outline="none",this.volumeSlider.style.opacity="0.7",this.volumeSlider.style.transition="opacity 0.2s",e.appendChild(this.volumeBtn),e.appendChild(this.volumeSlider),n.appendChild(e)}this.options.controls.fullscreen&&(this.fullscreenBtn=document.createElement("button"),this.fullscreenBtn.className="lector-fullscreen",this.fullscreenBtn.innerHTML=o,this.fullscreenBtn.style.background="none",this.fullscreenBtn.style.border="none",this.fullscreenBtn.style.color=this.options.colors.text,this.fullscreenBtn.style.width="32px",this.fullscreenBtn.style.height="32px",this.fullscreenBtn.style.display="flex",this.fullscreenBtn.style.alignItems="center",this.fullscreenBtn.style.justifyContent="center",this.fullscreenBtn.style.borderRadius="4px",this.fullscreenBtn.style.transition="all 0.2s",this.fullscreenBtn.style.cursor="pointer",n.appendChild(this.fullscreenBtn)),e.appendChild(t),e.appendChild(n),this.controls.appendChild(e),this.player.appendChild(this.video),this.player.appendChild(this.controls),this.container.innerHTML="",this.container.appendChild(this.player)}startHideControlsTimer(){this.controlsTimeout&&clearTimeout(this.controlsTimeout),this.controlsTimeout=setTimeout(()=>{this.hideControls()},this.options.hideControlsTimeout)}resetHideControlsTimer(){this.showControls(),this.startHideControlsTimer()}showControls(){this.isControlsVisible||(this.controls.style.opacity="1",this.controls.style.pointerEvents="auto",this.isControlsVisible=!0)}hideControls(){this.isControlsVisible&&!this.video.paused&&(this.controls.style.opacity="0",this.controls.style.pointerEvents="none",this.isControlsVisible=!1)}handleKeyDown(e){const t=e.key.toLowerCase();switch(t){case" ":case"k":e.preventDefault(),this.togglePlay(),this.resetHideControlsTimer();break;case"m":this.toggleMute(),this.resetHideControlsTimer();break;case"f":this.toggleFullscreen(),this.resetHideControlsTimer();break;case"arrowleft":e.preventDefault(),this.seekRelative(-this.options.seekStep),this.showSeekFeedback(-this.options.seekStep),this.resetHideControlsTimer();break;case"arrowright":e.preventDefault(),this.seekRelative(this.options.seekStep),this.showSeekFeedback(this.options.seekStep),this.resetHideControlsTimer();break;case"arrowup":e.preventDefault(),this.setVolume(Math.min(1,this.video.volume+.1)),this.resetHideControlsTimer();break;case"arrowdown":e.preventDefault(),this.setVolume(Math.max(0,this.video.volume-.1)),this.resetHideControlsTimer();break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":const s=parseInt(t)/10;this.video.currentTime=this.video.duration*s,this.resetHideControlsTimer()}}showSeekFeedback(e){const t=document.createElement("div");t.className="lector-seek-feedback",t.textContent=(e>0?"+":"")+e+"s",t.style.position="absolute",t.style.top="50%",t.style.left="50%",t.style.transform="translate(-50%, -50%)",t.style.background="rgba(0, 0, 0, 0.7)",t.style.color="white",t.style.padding="10px 20px",t.style.borderRadius="20px",t.style.fontSize="24px",t.style.fontWeight="bold",t.style.pointerEvents="none",t.style.zIndex="100",t.style.transition="opacity 0.5s",this.player.appendChild(t),setTimeout(()=>{t.style.opacity="0",setTimeout(()=>{t.parentNode&&t.remove()},500)},1e3)}seekRelative(e){this.video.currentTime=Math.max(0,Math.min(this.video.currentTime+e,this.video.duration))}setupEventListeners(){this.video.addEventListener("timeupdate",this.updateProgress.bind(this)),this.video.addEventListener("loadedmetadata",this.updateTimeDisplay.bind(this)),this.video.addEventListener("click",this.togglePlay.bind(this)),this.video.addEventListener("play",this.onPlay.bind(this)),this.video.addEventListener("pause",this.onPause.bind(this)),this.video.addEventListener("volumechange",this.onVolumeChange.bind(this)),this.player.addEventListener("mousemove",this.resetHideControlsTimer.bind(this)),this.player.addEventListener("mouseenter",this.showControls.bind(this)),this.player.addEventListener("mouseleave",()=>{this.video.paused||this.hideControls()}),document.addEventListener("keydown",this.handleKeyDown.bind(this));let e=0,t=0;this.player.addEventListener("touchstart",s=>{e=s.touches[0].clientX,t=Date.now(),this.showControls()}),this.player.addEventListener("touchend",s=>{const i=s.changedTouches[0].clientX,o=Date.now(),n=i-e,l=o-t;if(Math.abs(n)>50&&l<300){const e=n>0?this.options.seekStep:-this.options.seekStep;this.seekRelative(e),this.showSeekFeedback(e)}}),this.playPauseBtn&&this.playPauseBtn.addEventListener("click",this.togglePlay.bind(this)),this.progress&&this.progress.parentElement.addEventListener("click",this.seek.bind(this)),this.volumeBtn&&this.volumeBtn.addEventListener("click",this.toggleMute.bind(this)),this.volumeSlider&&this.volumeSlider.addEventListener("input",e=>{this.setVolume(parseFloat(e.target.value))}),this.fullscreenBtn&&this.fullscreenBtn.addEventListener("click",this.toggleFullscreen.bind(this))}onPlay(){this.playPauseBtn&&this.video&&(this.playPauseBtn.innerHTML=this.icons.pause)}onPause(){this.playPauseBtn&&this.video&&(this.playPauseBtn.innerHTML=this.icons.play)}updateProgress(){if(!this.progress||!this.video)return;const e=this.video.currentTime/this.video.duration*100;this.progress.style.width=`${e}%`,this.updateTimeDisplay()}updateTimeDisplay(){if(!this.timeDisplay||!this.video)return;const e=e=>`${Math.floor(e/60)}:${(e=Math.floor(e%60))<10?"0":""}${e}`;this.timeDisplay.textContent=`${e(this.video.currentTime)} / ${e(this.video.duration||0)}`}seek(e){if(!this.progress||!this.video)return;const t=this.progress.parentElement.getBoundingClientRect(),s=(e.clientX-t.left)/t.width;this.video.currentTime=s*this.video.duration,this.resetHideControlsTimer()}setVolume(e){return this.video?(this.video.volume=Math.max(0,Math.min(1,e)),this.updateVolumeIcon(),this):this}toggleMute(){return this.video?(this.video.muted=!this.video.muted,this.updateVolumeIcon(),this):this}onVolumeChange(){this.updateVolumeIcon()}updatePlayPauseIcon(){this.playPauseBtn&&this.video&&(this.playPauseBtn.innerHTML=this.video.paused?this.icons.play:this.icons.pause)}updateVolumeIcon(){this.volumeBtn&&this.video&&(this.volumeBtn.innerHTML=this.video.muted||0===this.video.volume?this.icons.volumeMute:this.icons.volume)}toggleFullscreen(){document.fullscreenElement?document.exitFullscreen().then(()=>{this.fullscreenBtn&&(this.fullscreenBtn.innerHTML=this.icons.fullscreen)}):this.player.requestFullscreen().then(()=>{this.fullscreenBtn&&(this.fullscreenBtn.innerHTML=this.icons.fullscreenExit)}).catch(e=>{console.error(`Erreur lors du passage en plein écran: ${e.message}`)})}applyTheme(){const e=document.createElement("style");e.textContent=`\n      .lector-player video::-webkit-media-controls {\n        display: none !important;\n      }\n      \n      .lector-player video::-webkit-media-controls-enclosure {\n        display: none !important;\n      }\n      \n      .lector-controls {\n        transition: opacity 0.3s ease-out;\n        opacity: 1;\n      }\n      \n      .lector-controls.hidden {\n        opacity: 0;\n        pointer-events: none;\n      }\n      \n      .lector-progress-container {\n        transition: height 0.2s ease;\n      }\n      \n      .lector-progress-container:hover .lector-progress {\n        height: 6px;\n      }\n      \n      .lector-volume-slider::-webkit-slider-thumb {\n        -webkit-appearance: none;\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: ${this.options.colors.text};\n        cursor: pointer;\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n      \n      .lector-volume-container:hover .lector-volume-slider::-webkit-slider-thumb {\n        opacity: 1;\n      }\n      \n      .lector-volume-slider::-moz-range-thumb {\n        width: 12px;\n        height: 12px;\n        border-radius: 50%;\n        background: ${this.options.colors.text};\n        cursor: pointer;\n        opacity: 0;\n        transition: opacity 0.2s;\n      }\n      \n      .lector-volume-container:hover .lector-volume-slider::-moz-range-thumb {\n        opacity: 1;\n      }\n      \n      button {\n        transition: background-color 0.2s, transform 0.1s;\n      }\n      \n      button:active {\n        transform: scale(0.95);\n      }\n      \n      button:hover {\n        background-color: rgba(255, 255, 255, 0.1) !important;\n      }\n      \n      .lector-volume-slider {\n        transition: opacity 0.3s;\n      }\n      \n      .lector-volume-slider:hover {\n        opacity: 1 !important;\n      }\n      \n      @media (max-width: 600px) {\n        .lector-controls {\n          padding: 5px !important;\n        }\n        \n        .lector-time {\n          font-size: 12px !important;\n        }\n        \n        button {\n          padding: 2px !important;\n          min-width: 28px !important;\n          height: 28px !important;\n        }\n      }\n    `,document.head.appendChild(e)}play(){return this.video&&(this.video.play().catch(e=>{console.error("Erreur lors de la lecture de la vidéo:",e)}),this.updatePlayPauseIcon()),this}pause(){return this.video&&(this.video.pause(),this.updatePlayPauseIcon()),this}setLoop(e){return this.video&&(this.video.loop=e),this}setMuted(e){return this.video&&(this.video.muted=e,this.volumeSlider&&(this.volumeSlider.value=e?0:this.video.volume),this.updateVolumeIcon()),this}setVolume(e){return this.video&&(this.video.muted=!1,this.video.volume=Math.max(0,Math.min(1,e)),this.volumeSlider&&(this.volumeSlider.value=e),this.updateVolumeIcon()),this}static init(e,s={}){return new t(e,s)}}void 0!==e.exports?e.exports=t:window.Lector=t}},t={},function s(i){var o=t[i];if(void 0!==o)return o.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,s),n.exports}(679).default;var e,t});